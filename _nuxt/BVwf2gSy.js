import{r as _,am as G,al as D,aj as Q,Q as P,G as O,a5 as H,ag as B,o as J,a7 as K,A as U,d as L,x as X,c as C,e as T,f as $,i as W,w as Y,V as M,T as Z,n as j,a4 as ee,k as N,t as te,h as ne,a3 as oe}from"./C0SHh4Ly.js";function V(e){return D()?(Q(e),!0):!1}function h(e){return typeof e=="function"?e():P(e)}const E=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const se=Object.prototype.toString,ae=e=>se.call(e)==="[object Object]",k=()=>{},ie=re();function re(){var e,t;return E&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function le(e){let t;function a(){return t||(t=e()),t}return a.reset=async()=>{const n=t;t=void 0,n&&await n},a}function ue(e,t,a={}){const{immediate:n=!0}=a,r=_(!1);let s=null;function m(){s&&(clearTimeout(s),s=null)}function d(){r.value=!1,m()}function p(...f){m(),r.value=!0,s=setTimeout(()=>{r.value=!1,s=null,e(...f)},h(t))}return n&&(r.value=!0,E&&p()),V(d),{isPending:G(r),start:p,stop:d}}const q=E?window:void 0,z=E?window.navigator:void 0;function b(e){var t;const a=h(e);return(t=a==null?void 0:a.$el)!=null?t:a}function S(...e){let t,a,n,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([a,n,r]=e,t=q):[t,a,n,r]=e,!t)return k;Array.isArray(a)||(a=[a]),Array.isArray(n)||(n=[n]);const s=[],m=()=>{s.forEach(l=>l()),s.length=0},d=(l,c,g,w)=>(l.addEventListener(c,g,w),()=>l.removeEventListener(c,g,w)),p=H(()=>[b(t),h(r)],([l,c])=>{if(m(),!l)return;const g=ae(c)?{...c}:c;s.push(...a.flatMap(w=>n.map(A=>d(l,w,A,g))))},{immediate:!0,flush:"post"}),f=()=>{p(),m()};return V(f),f}let I=!1;function ce(e,t,a={}){const{window:n=q,ignore:r=[],capture:s=!0,detectIframe:m=!1}=a;if(!n)return k;ie&&!I&&(I=!0,Array.from(n.document.body.children).forEach(o=>o.addEventListener("click",k)),n.document.documentElement.addEventListener("click",k));let d=!0;const p=o=>h(r).some(i=>{if(typeof i=="string")return Array.from(n.document.querySelectorAll(i)).some(v=>v===o.target||o.composedPath().includes(v));{const v=b(i);return v&&(o.target===v||o.composedPath().includes(v))}});function f(o){const i=h(o);return i&&i.$.subTree.shapeFlag===16}function l(o,i){const v=h(o),u=v.$.subTree&&v.$.subTree.children;return u==null||!Array.isArray(u)?!1:u.some(y=>y.el===i.target||i.composedPath().includes(y.el))}const c=o=>{const i=b(e);if(o.target!=null&&!(!(i instanceof Element)&&f(e)&&l(e,o))&&!(!i||i===o.target||o.composedPath().includes(i))){if(o.detail===0&&(d=!p(o)),!d){d=!0;return}t(o)}};let g=!1;const w=[S(n,"click",o=>{g||(g=!0,setTimeout(()=>{g=!1},0),c(o))},{passive:!0,capture:s}),S(n,"pointerdown",o=>{const i=b(e);d=!p(o)&&!!(i&&!o.composedPath().includes(i))},{passive:!0}),m&&S(n,"blur",o=>{setTimeout(()=>{var i;const v=b(e);((i=n.document.activeElement)==null?void 0:i.tagName)==="IFRAME"&&!(v!=null&&v.contains(n.document.activeElement))&&t(o)},0)})].filter(Boolean);return()=>w.forEach(o=>o())}function de(){const e=_(!1),t=K();return t&&J(()=>{e.value=!0},t),e}function F(e){const t=de();return O(()=>(t.value,!!e()))}function R(e,t={}){const{controls:a=!1,navigator:n=z}=t,r=F(()=>n&&"permissions"in n),s=B(),m=typeof e=="string"?{name:e}:e,d=B(),p=()=>{var l,c;d.value=(c=(l=s.value)==null?void 0:l.state)!=null?c:"prompt"};S(s,"change",p);const f=le(async()=>{if(r.value){if(!s.value)try{s.value=await n.permissions.query(m)}catch{s.value=void 0}finally{p()}if(a)return U(s.value)}});return f(),a?{state:d,isSupported:r,query:f}:d}function pe(e={}){const{navigator:t=z,read:a=!1,source:n,copiedDuring:r=1500,legacy:s=!1}=e,m=F(()=>t&&"clipboard"in t),d=R("clipboard-read"),p=R("clipboard-write"),f=O(()=>m.value||s),l=_(""),c=_(!1),g=ue(()=>c.value=!1,r);function w(){m.value&&v(d.value)?t.clipboard.readText().then(u=>{l.value=u}):l.value=i()}f.value&&a&&S(["copy","cut"],w);async function A(u=h(n)){f.value&&u!=null&&(m.value&&v(p.value)?await t.clipboard.writeText(u):o(u),l.value=u,c.value=!0,g.start())}function o(u){const y=document.createElement("textarea");y.value=u??"",y.style.position="absolute",y.style.opacity="0",document.body.appendChild(y),y.select(),document.execCommand("copy"),y.remove()}function i(){var u,y,x;return(x=(y=(u=document==null?void 0:document.getSelection)==null?void 0:u.call(document))==null?void 0:y.toString())!=null?x:""}function v(u){return u==="granted"||u==="prompt"}return{isSupported:f,text:l,copied:c,copy:A}}const fe={class:"icon-wrapper"},me=L({__name:"ProseCodeCopyButton",props:{content:{type:String,default:""},show:{type:Boolean,default:!1}},setup(e){const t=e,a=_(),{copy:n}=pe();ce(a,()=>{s.value==="copied"&&(s.value="init")});const{prose:r}=X(),s=_("init"),m=d=>{n(t.content).then(()=>{s.value="copied"}).catch(p=>{console.warn("Couldn't copy to clipboard!",p)})};return(d,p)=>{const f=ee;return C(),T("button",{ref_key:"copyButtonRef",ref:a,class:j([(e.show||s.value==="copied")&&"show"]),onClick:m},[p[0]||(p[0]=$("span",{class:"sr-only"},"Copy to clipboard",-1)),$("span",fe,[W(Z,{name:"fade"},{default:Y(()=>{var l,c;return[s.value==="copied"?(C(),M(f,{key:0,name:(l=P(r).copyButton)==null?void 0:l.iconCopied,size:"18",class:"copied"},null,8,["name"])):(C(),M(f,{key:1,name:(c=P(r).copyButton)==null?void 0:c.iconCopy,size:"18"},null,8,["name"]))]}),_:1})])],2)}}}),ve=N(me,[["__scopeId","data-v-4a003820"]]),ye={key:0,class:"filename"},ge=L({__name:"ProseCode",props:{code:{type:String,default:""},language:{type:String,default:null},filename:{type:String,default:null},highlights:{type:Array,default:()=>[]}},setup(e){const t=_(!1);return(a,n)=>{const r=ve;return C(),T("div",{class:j([[`highlight-${e.language}`],"prose-code"]),onMouseenter:n[0]||(n[0]=s=>t.value=!0),onMouseleave:n[1]||(n[1]=s=>t.value=!1)},[e.filename?(C(),T("span",ye,te(e.filename),1)):ne("",!0),oe(a.$slots,"default",{},void 0,!0),W(r,{show:t.value,content:e.code,class:"copy-button"},null,8,["show","content"])],34)}}}),he=N(ge,[["__scopeId","data-v-c164ce0a"]]);export{he as default};
